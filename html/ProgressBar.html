<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <link href="../css/mbase.css" rel="stylesheet" />
    <link href="../css/mprogressbar.css" rel="stylesheet" />
    <title></title>
</head>
<body>
    <div style="width:600px;">
        1. Default(small)
        <div class="m-progressbar bg-color-gray" >
            <div class="m-progress bg-color-blue" style="width:50%"></div>
        </div>
        2. Middle
        <div class="m-progressbar middle bg-color-gray" >
            <div class="m-progress bg-color-green"></div>
        </div>
        3. Big
        <div class="m-progressbar big bg-color-gray" >
            <div class="m-progress bg-color-darkred" style="width:15%"></div>
        </div>
    </div>
    <script src="../js/jquery-1.8.1.min.js"></script>
    <script>
        (function($){
            $.fn.mProgressbar = function(opt,value){
                function setValue(node, value){
                    value = Math.min(value,100); // value can't great then 100
                    node.data('data-value',value).animate({'width':value + '%'},300);
                }
                if(opt === 'setValue'){ //set the progress value
                    setValue($(this).find('.m-progress'),value || 0);
                    return this;
                }else if(opt === 'getValue'){ //get the progress value
                    return this.find('.m-progress').data('data-value')
                }
                return this.each(function(){
                    var $this = $(this).find('.m-progress');
                    setValue($this,$this.width() / $(this).width() * 100);
                });
            }
            $('.m-progressbar').mProgressbar(); // auto call mProgressbar function
        })(jQuery)
        // for test
        setTimeout(function(){
            $('.m-progressbar').not(':first').each(function(){
                $(this).mProgressbar('setValue',Math.random()*99 + 1)
            })
            /*$('.m-progressbar').each(function(){
                console.log($(this).mProgressbar('getValue'));
            });*/
        },1000)
    </script>
</body>
</html>